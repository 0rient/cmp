详解xywh及计算方法

CMP用参数[b]xywh[/b]来指定某个[b]可视对象[/b]在其[b]父可视对象[/b]中的[b]位置[/b]和[b]宽高[/b]

我们所涉及到的长度单位都统一用像素px，下面进行详细说明：


[b]一，认识2个对象[/b]

[b]可视对象[/b]
即能见的对象，能见不是说必须显示出来，而是指它可以显示也可以隐藏，下面都简称【对象】
如某个窗口、某个按钮等，我们可以简单的将其看成一个【长方形】

[b]父可视对象[/b]
对象的上级(parent)，本身也是可视对象，像一个容器，包含了一个或多个子对象，下面也称【父容器】
如顶级容器就是播放器舞台，它包含了窗口和插件
如窗口容器，它包含了按钮，进度条，文本区等

[b]长方形[/b]
我们可以把这2个对象都看成长方形，即父容器长方形包含着对象长方形
长方形就会有宽度(width)和高度(height)
还有上、下、左、右4条边，以及水平中心线和垂直中心线，共6条边线
边线的交叉就会形成4个顶点，4个边中心点，以及1个水平垂直中心点，共9个点

对应于9中对齐方式：
左上，中上，右上
左中，中中，右中
左下，中下，右下

我们引入2个特殊参数C和R，来表示这9种不同方式的坐标：
(x,y)， (xC,y)， (xR,y)
(x,yC)，(xC,yC)，(xR,yC)
(x,yR)，(xC,yR)，(xR,yR)


[b]二，指定位置[/b]

上面的坐标(x, y)是用来描述一个点(point)在其平面坐标系上的位置(position)
其实就是点到两个轴线之间的距离的组合，即水平方向距离为x，垂直方向距离为y

那么我们怎样指定某个对象在其父容器中的位置呢？

这里我们只需要在对象上取一点
然后指定这个点到父容器水平方向一条边线之间的距离x
以及指定这个点到父容器垂直方向一条边线之间的距离y
这样(x,y)即可表示其位置

可是我们应该在对象上取哪个点？以及在父容器水平和垂直方向取哪两条边线呢？

这里我们规定：[b]对象和父容器都取相同的对齐方式[/b]

也就是，如果对象取左上顶点来定位，那么父容器就取左边和上边来测距
反之也成立，如果想要对象以父容器右边和下边对齐，那么对象就取右下顶点
如果想要对象以父容器右边和水平中线对齐，那么对象就取右边中点
...
这样我们就有9种不同的方式
其实，这是水平和垂直方向各有3种方式组合而成
下面我们来详细认识这3种方式，其他的也就自然明白了



速记口诀：



默认坐标系原点在左上顶点，并水平向右(x方向)和垂直向下(y方向)递增，即左上对齐(这也是计算机屏幕的坐标系)
如果需要特殊对齐，则有参数C(水平/垂直居中对齐)以及R(水平/垂直反向对齐，右对齐/下对齐)


首先需要在父容器建立一个坐标系，这一点非常重要
如果学会了怎么样建立一个合适的坐标系，那么定位会变得非常简单





1，默认是左上对齐，也就是以父容器左上顶点为原点，建立一个坐标系
两轴方向分别是水平向右和垂直向下递增
那么对象在此坐标系中，我们也取其左上顶点，并得出坐标为(100,200)，则
(x,y) = (100,200)
其实就是对象左边距父容器左边100像素，对象上边距父容器上边200像素

2，水平垂直都居中对齐，也就是以父容器的中心为原点，建立一个坐标系
那么对象在此坐标系中，我们也取其中心点，并得出坐标为(100,-100)，则
(xC,yC) = (100C,-100C)
x负值表示偏左，y负值表示偏上，那么上面就是偏向右上


3，水平垂直都反向对齐，即右下对齐，也就是以父容器的右下顶点为原点，建立一个坐标系
既然是反向，那么此时两轴方向分别是水平向左和垂直向上递增
那么对象在此坐标系中，我们也取其右下顶点，并得出坐标为(30,20)，即
(xR,yR) = (30R,20R)


最后用上面的值计算对象在其父容器中的位置：

默认对齐，即左上对齐，直接取数值：

1，如果居左对齐，则都取左边的横坐标，然后相减
计算：x = (自X - 0) = 自X
实际上就是对象自己的横坐标X

2，如果居上对齐，则都取上边的纵坐标，然后相减
计算：y = (自Y - 0) = 自Y
实际上就是对象自己的纵坐标Y

反向对齐，即右下对齐，用到特殊参数R：

3，如果居右对齐，则都取右边的横坐标，然后相减并取反
计算：x = -(自X + 自W - 父W)R = (父W - 自X - 自W)R
实际上就是两个右边之间的距离

4，如果居下对齐，则都取下边的纵坐标，然后相减并取反
计算：y = -(自Y + 自H - 父H)R = (父H - 自Y - 自H)R
实际上就是两个下边之间的距离

居中对齐，用到特殊参数C：

5，水平居中对齐，则都取水平中心的横坐标，然后相减
计算：x = (自X + 自W/2 - 父W/2)C
实际上就是两个水平中心之间的距离，小于0表示在父容器水平中心的左边

6，垂直居中对齐，则都取垂直中心的纵坐标，然后相减
计算：y = (自Y + 自H/2 - 父H/2)C
实际上就是两个垂直中心之间的距离，小于0表示在父容器垂直中心的上边

x和y各有三种方式，它们都可以任意选择其中的一种，然后相组合，即得出位置坐标(x,y)



[b]三，指定宽高[/b]

也就是对象长方形的宽度(width)以及高度(height)

1，最直接的就是固定宽高，如宽400像素，高300像素：
(w, h) = (400, 300)

2，如果想要和父容器一样宽高，或者一半宽高等，即百分比宽高，就用到百分比参数P(percent)
如满屏，满窗口：
(w, h) = (100P, 100P)
如总和父容器一半的宽度或高度：
w = 50P
h = 50P

3，如果想要宽高相对于父容器宽高，只是上下或左右有一段边距，这里用到边距参数B(border)
如能左右自动拉伸的进度条，但宽度总是比所在窗口的宽度两边总是少5个像素：
w = 5B
如能上下自动拉伸的列表，其高度相对于所在窗口高度，总是上下两边留有10像素的边距：
h = 10B

4，以上三种形式可以单独应用于宽或者高，宽高形式可以任意组合
也就是宽固定时，高可以是百分比，或者宽百分比时，高可以用边距



[b]四，组合xywh参数[/b]

这样将位置(x,y)以及宽高(w,h)组合起来，并用英文逗号(,)隔开，即参数：

xywh = "x, y, w, h"

之所以取名为xywh也是为了方便记忆，不易颠倒顺序

常见的一些例子：

xywh="0, 0, 100P, 100P"      宽高和父容器一样，如窗口满屏，视频满窗口
xywh="0C, 0C, 400, 300"      固定宽400像素，高300像素，位置绝对居中(水平垂直都居中)，无偏移
xywh="100C, 0C, 400, 300"    位置绝对居中，但中心向右偏移100像素
xywh="0C, -100C, 400, 300"   位置绝对居中，但中心向上偏移100像素
xywh="0C, 0C, 5B, 10"        两边留5个像素，高10像素，如播放进度条
xywh="5R, 0, 30, 15"         宽30像素高15像素，位置右上角，距右5像素，如关闭按钮


相关描述：

x:  横坐标，水平方向
y:  纵坐标，垂直方向
w:  width 宽度
h:  height 高度
C:  center 居中
R:  reverse 反向，相反
P:  percent 百分比
B:  border 边距，边界
px: pixel 像素，点
